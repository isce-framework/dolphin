# .readthedocs.yaml
# Read the Docs configuration file
# See https://docs.readthedocs.io/en/stable/config-file/v2.html for details
version: 2

mkdocs:
  configuration: mkdocs.yml

build:
  os: ubuntu-24.04
  commands:
    - asdf plugin add pixi
    - asdf install pixi latest
    - asdf global pixi latest
    - pixi install -e docs
    - pixi shell --environment docs
    # Avoiding problems from the local extension in docs/mdx_bib.py  :
    # Config value 'markdown_extensions': Failed to load extension 'docs.mdx_bib'
    # ModuleNotFoundError: No module named 'docs'
    - export PYTHONPATH="${PYTHONPATH}:${PWD}"
    - mkdocs build --clean --site-dir $READTHEDOCS_OUTPUT/html --config-file mkdocs.yml
